'use strict';
var execSync = require('./exec_sync');
var distpath = require('path').normalize(process.env.TMPDIR + 'dist/');

/**
 * `installNodeModules` does exactly what you expect:
 * installs the node_modules required to run your lambda function.
 */
module.exports = function installNodeModules () {
  const pwd = process.cwd(); // get current working directory
  console.log('pwd:', pwd);
  console.log('distpath:', distpath);
  process.chdir(distpath); // change to /dist directory
  var cmd = 'npm install --production'; // install only production node_modules
  execSync(cmd); // execute command synchronously
  process.chdir(pwd); // change back to original directory
  console.log('process.cwd():', process.cwd());
  // return;
};
